# @package _global_
# Phase 1B: Masking Strategy - Time-Only (Control Baseline)
# Description: Uniform masking without importance signal
# Formula: g_time(i,t) = f(t)  (importance i is ignored)
# - Curriculum progression only, no adaptive masking
# - Validates that the importance signal itself matters
# Expected PPL: 42.31 (+3.28 vs balanced)
# Expected Per-Stage Loss: Easy=3.5, Medium=2.5, Hard=2.3
# Purpose: Control baseline to measure the value of importance-aware masking

defaults:
  - base_config
  - _self_

# Model configuration
model:
  # Use full ATAT importance estimator (same as Phase 1A)
  # But importance will NOT be used in the masking strategy
  importance_mode: "full"  # 0.7 * learned + 0.3 * frequency_prior
  importance_learned_weight: 0.7
  importance_frequency_weight: 0.3

  # Masking strategy configuration (Phase 1B specific)
  masking_strategy: "time_only"  # Control: No importance signal
  masking_config:
    type: "curriculum_time_only"
    # Time-only strategy: importance is ignored, only time-based scheduling
    # g_time(i,t) = f(t)  (importance i ignored)
    use_importance: false  # Key difference - importance not used
    description: "Uniform masking with curriculum progression only"
    
  curriculum:
    # Standard curriculum from project_plan.md
    enabled: true
    boundaries:
      - step: 150000   # Easy/Medium boundary
        name: "medium"
      - step: 350000   # Medium/Hard boundary
        name: "hard"
    stages:
      easy:
        steps: 150000
        description: "Uniform masking (low masking probability)"
      medium:
        steps: 200000
        description: "Increased masking probability"
      hard:
        steps: 150000
        description: "High masking probability, all tokens equal"

# Training configuration
trainer:
  max_steps: 5000  # DEBUG: 5K steps

# Optimizer configuration
optimizer:
  type: "adamw"
  weight_decay: 0.01
  betas: [0.9, 0.999]

# Logging configuration
wandb:
  project: "mdlm-atat-phase1b"
  name: "phase1b-masking-time-only"
  tags: ["phase1b", "ablation", "masking", "control", "baseline"]
  notes: "Phase 1B: Time-only masking (control baseline) - validates the importance of adaptive masking"
  config:
    masking_strategy: "time_only"
    importance_mode: "full"
    use_importance_in_masking: false
    expected_ppl: 42.31
    expected_easy_loss: 3.5
    expected_medium_loss: 2.5
    expected_hard_loss: 2.3
    purpose: "Control baseline without importance-aware masking"

# Dataset configuration
data:
  dataset_preset: "debug"  # Will be overridden by command line
  num_workers: 4
  pin_memory: true

# Reproducibility
seed: 42
