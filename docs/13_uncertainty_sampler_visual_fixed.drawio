<mxfile host="65bd71144e">
    <diagram id="uncertainty-visual" name="Uncertainty Sampler - Visual">
        <mxGraphModel dx="2493" dy="1218" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1000" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="title" value="UNCERTAINTY-GUIDED SAMPLER" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=34;fontStyle=1;fontColor=#0277BD;" parent="1" vertex="1">
                    <mxGeometry x="250" y="20" width="1100" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="subtitle" value="Adaptive Inference with Early Termination" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontColor=#666666;" parent="1" vertex="1">
                    <mxGeometry x="250" y="80" width="1100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="init-block" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=4;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="150" width="1480" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="init-title" value="INITIALIZATION" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#1976D2;" parent="1" vertex="1">
                    <mxGeometry x="110" y="165" width="250" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="init-prompt" value="Input Prompt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#0D47A1;strokeWidth=2;fontSize=13;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="110" y="205" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="init-model" value="Load Model" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#0D47A1;strokeWidth=2;fontSize=13;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="340" y="205" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="init-config" value="Config (steps, tau)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#0D47A1;strokeWidth=2;fontSize=13;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="570" y="205" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="init-threshold" value="Thresholds" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#0D47A1;strokeWidth=2;fontSize=13;fontColor=#333333;" parent="1" vertex="1">
                    <mxGeometry x="800" y="205" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="init-mask" value="Initialize: [MASK] * N" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4CAF50;strokeColor=#1B5E20;strokeWidth=2;fontSize=14;fontColor=#FFFFFF;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1030" y="205" width="500" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="loop-title" value="ITERATIVE DENOISING LOOP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1;fontColor=#E65100;" parent="1" vertex="1">
                    <mxGeometry x="80" y="280" width="1480" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="step1-block" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;strokeWidth=4;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="340" width="480" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="step1-num" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#FF6F00;strokeColor=none;fontColor=#FFFFFF;fontSize=24;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="110" y="360" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step1-title" value="MODEL PREDICTION" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#E65100;" parent="1" vertex="1">
                    <mxGeometry x="185" y="375" width="355" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="step1-icon" value="PREDICT" style="ellipse;whiteSpace=wrap;html=1;fillColor=#FF6F00;strokeColor=none;fontColor=#FFFFFF;fontSize=14;fontStyle=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="260" y="430" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="step1-detail" value="logits = model(x, t)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#555555;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="110" y="485" width="430" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="step2-block" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;strokeWidth=4;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="600" y="340" width="480" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="step2-num" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#388E3C;strokeColor=none;fontColor=#FFFFFF;fontSize=24;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="630" y="360" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step2-title" value="UNCERTAINTY COMPUTE" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#2E7D32;" parent="1" vertex="1">
                    <mxGeometry x="705" y="375" width="355" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="step2-icon" value="ENTROPY" style="ellipse;whiteSpace=wrap;html=1;fillColor=#388E3C;strokeColor=none;fontColor=#FFFFFF;fontSize=14;fontStyle=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="780" y="430" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="step2-detail" value="H = -sum(p*log(p))" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#555555;fontFamily=Courier New;" parent="1" vertex="1">
                    <mxGeometry x="630" y="485" width="430" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="step3-block" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;strokeWidth=4;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="1120" y="340" width="440" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="step3-num" value="3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#7B1FA2;strokeColor=none;fontColor=#FFFFFF;fontSize=24;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="1150" y="360" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step3-title" value="SELECT TOP-K UNCERTAIN" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=17;fontStyle=1;fontColor=#7B1FA2;" parent="1" vertex="1">
                    <mxGeometry x="1225" y="375" width="315" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="step3-icon" value="SELECT" style="ellipse;whiteSpace=wrap;html=1;fillColor=#7B1FA2;strokeColor=none;fontColor=#FFFFFF;fontSize=14;fontStyle=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="1280" y="430" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="step3-detail" value="k = ratio * num_masked" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#555555;" parent="1" vertex="1">
                    <mxGeometry x="1150" y="485" width="380" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="arrow1" value="" style="shape=flexArrow;endArrow=classic;html=1;fontSize=20;fillColor=#E65100;strokeColor=none;width=25;endSize=7;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="320" y="540" as="sourcePoint"/>
                        <mxPoint x="320" y="600" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrow2" value="" style="shape=flexArrow;endArrow=classic;html=1;fontSize=20;fillColor=#2E7D32;strokeColor=none;width=25;endSize=7;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="840" y="540" as="sourcePoint"/>
                        <mxPoint x="840" y="600" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="arrow3" value="" style="shape=flexArrow;endArrow=classic;html=1;fontSize=20;fillColor=#7B1FA2;strokeColor=none;width=25;endSize=7;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="1340" y="540" as="sourcePoint"/>
                        <mxPoint x="1340" y="600" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="step4-block" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;strokeWidth=4;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="620" width="720" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="step4-num" value="4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#D32F2F;strokeColor=none;fontColor=#FFFFFF;fontSize=24;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="110" y="640" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step4-title" value="DENOISE AND UPDATE" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#C62828;" parent="1" vertex="1">
                    <mxGeometry x="185" y="655" width="595" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="step4-icon" value="UPDATE" style="ellipse;whiteSpace=wrap;html=1;fillColor=#D32F2F;strokeColor=none;fontColor=#FFFFFF;fontSize=14;fontStyle=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="360" y="685" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="step4-detail" value="x[uncertain_indices] = sample(probs)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#555555;fontFamily=Courier New;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="110" y="730" width="670" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="step5-block" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;strokeWidth=4;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="840" y="620" width="720" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="step5-num" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#F9A825;strokeColor=none;fontColor=#FFFFFF;fontSize=24;fontStyle=1;" parent="1" vertex="1">
                    <mxGeometry x="870" y="640" width="60" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="step5-title" value="CHECK CONVERGENCE" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;fontColor=#F57F17;" parent="1" vertex="1">
                    <mxGeometry x="945" y="655" width="595" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="step5-icon" value="CHECK" style="ellipse;whiteSpace=wrap;html=1;fillColor=#F9A825;strokeColor=none;fontColor=#FFFFFF;fontSize=14;fontStyle=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="1130" y="685" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="step5-detail" value="If avg(H) &lt; threshold: STOP" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#555555;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="870" y="730" width="670" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="loop-arrow" value="" style="shape=flexArrow;endArrow=classic;html=1;fontSize=20;fillColor=#FF6F00;strokeColor=none;width=35;endSize=9;curved=1;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="1580" y="430" as="sourcePoint"/>
                        <mxPoint x="60" y="430" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1580" y="1050"/>
                            <mxPoint x="60" y="1040"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="loop-text" value="REPEAT" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#FF6F00;" parent="1" vertex="1">
                    <mxGeometry x="740" y="255" width="120" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="arrow4" value="" style="shape=flexArrow;endArrow=classic;html=1;fontSize=20;fillColor=#4CAF50;strokeColor=none;width=40;endSize=10;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="800" y="780" as="sourcePoint"/>
                        <mxPoint x="800" y="840" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="output-block" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;strokeWidth=4;shadow=1;" parent="1" vertex="1">
                    <mxGeometry x="80" y="860" width="1480" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="output-badge" value="DONE" style="ellipse;whiteSpace=wrap;html=1;fillColor=#2E7D32;strokeColor=none;fontColor=#FFFFFF;fontSize=24;fontStyle=1;aspect=fixed;" parent="1" vertex="1">
                    <mxGeometry x="750" y="880" width="100" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="output-title" value="FINAL OUTPUT: Complete Sequence" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1;fontColor=#1B5E20;" parent="1" vertex="1">
                    <mxGeometry x="80" y="950" width="1480" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="perf1" value="2.7x Faster" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#81C784;strokeColor=#2E7D32;strokeWidth=2;fontSize=12;fontColor=#FFFFFF;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1180" y="150" width="150" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="perf2" value="Same Quality" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4FC3F7;strokeColor=#0277BD;strokeWidth=2;fontSize=12;fontColor=#FFFFFF;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1350" y="150" width="150" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="perf3" value="Smart Sampling" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFB74D;strokeColor=#E65100;strokeWidth=2;fontSize=12;fontColor=#FFFFFF;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1180" y="200" width="150" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="perf4" value="Early Stop" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BA68C8;strokeColor=#6A1B9A;strokeWidth=2;fontSize=12;fontColor=#FFFFFF;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1350" y="200" width="150" height="35" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>