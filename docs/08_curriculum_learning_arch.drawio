<mxfile host="65bd71144e">
    <diagram id="curriculum" name="Curriculum Learning Architecture">
        <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1400">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="2" value="Curriculum Learning: Progressive Difficulty Scheduling" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="200" y="20" width="1000" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="Input: Training Progress" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="40" y="80" width="1320" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="4" value="Current Step&#xa;global_step: int&#xa;Range: [0, max_steps]&#xa;Tracks training progress" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11" vertex="1" parent="1">
                    <mxGeometry x="60" y="160" width="300" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="Max Steps&#xa;max_steps: int&#xa;Total training steps&#xa;Default: 100,000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11" vertex="1" parent="1">
                    <mxGeometry x="390" y="160" width="300" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="Stage Boundaries&#xa;easy_end = max_steps * 0.33&#xa;medium_end = max_steps * 0.66&#xa;hard_end = max_steps * 1.00" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11" vertex="1" parent="1">
                    <mxGeometry x="720" y="160" width="300" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="Performance Metrics&#xa;val_loss, perplexity&#xa;For adaptive scheduling&#xa;(optional)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11" vertex="1" parent="1">
                    <mxGeometry x="1050" y="160" width="290" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="Stage Determination" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;verticalAlign=top" vertex="1" parent="1">
                    <mxGeometry x="40" y="260" width="1320" height="240" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="Compute Progress Ratio&#xa;&#xa;progress = global_step / max_steps&#xa;&#xa;Range: [0.0, 1.0]&#xa;  0.0 = start of training&#xa;  0.5 = halfway&#xa;  1.0 = end of training" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;align=left" vertex="1" parent="1">
                    <mxGeometry x="60" y="300" width="400" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="Determine Stage&#xa;&#xa;if progress &lt; 0.33:&#xa;    stage = 'easy'&#xa;    importance_range = (0.0, 0.4)&#xa;elif progress &lt; 0.66:&#xa;    stage = 'medium'&#xa;    importance_range = (0.3, 0.7)&#xa;else:&#xa;    stage = 'hard'&#xa;    importance_range = (0.6, 1.0)&#xa;&#xa;Returns: (stage_name, importance_range)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;align=left;fontFamily=Courier New;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="480" y="300" width="400" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="Adaptive Option&#xa;&#xa;if use_adaptive:&#xa;    # Adjust based on performance&#xa;    if val_loss plateau:&#xa;        advance to next stage early&#xa;    elif val_loss increasing:&#xa;        stay in current stage longer&#xa;&#xa;Allows dynamic curriculum pacing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;align=left" vertex="1" parent="1">
                    <mxGeometry x="900" y="300" width="440" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="Visual Timeline" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=10;align=left;fontFamily=Courier New;" vertex="1" parent="1">
                    <mxGeometry x="60" y="410" width="400" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="13" value="Step:     0────────33k────────66k────────100k&#xa;Stage:    [   EASY   ][  MEDIUM  ][   HARD    ]&#xa;Focus:    Simple     Moderate    Complex&#xa;Import:   0.0 - 0.4  0.3 - 0.7   0.6 - 1.0" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontFamily=Courier New;" vertex="1" parent="1">
                    <mxGeometry x="70" y="420" width="380" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="Stage 1: Easy Curriculum" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;verticalAlign=top" vertex="1" parent="1">
                    <mxGeometry x="40" y="520" width="420" height="280" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="Objective:&#xa;  Learn high-frequency, simple patterns&#xa;  Build basic language understanding&#xa;&#xa;Token Selection:&#xa;  importance_min = 0.0&#xa;  importance_max = 0.4&#xa;  &#xa;  Filter tokens:&#xa;    easy_tokens = (importance &lt; 0.4)&#xa;&#xa;Masking Strategy:&#xa;  Temperature τ = 2.0 (uniform)&#xa;  Mask ratio: 15-30%&#xa;  Focus: Common words, simple grammar&#xa;&#xa;Examples:&#xa;  • Articles: the, a, an&#xa;  • Prepositions: in, on, at&#xa;  • Common verbs: is, are, have&#xa;  • High-frequency nouns: time, person&#xa;&#xa;Loss Weighting:&#xa;  weight_easy = 2.0 (boost easy tokens)&#xa;  weight_other = 1.0" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=10;align=left" vertex="1" parent="1">
                    <mxGeometry x="60" y="560" width="380" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="Stage 2: Medium Curriculum" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1;verticalAlign=top" vertex="1" parent="1">
                    <mxGeometry x="480" y="520" width="420" height="280" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="Objective:&#xa;  Refine predictions on moderate difficulty&#xa;  Bridge simple and complex patterns&#xa;&#xa;Token Selection:&#xa;  importance_min = 0.3&#xa;  importance_max = 0.7&#xa;  &#xa;  Filter tokens:&#xa;    medium_tokens = (0.3 &lt; importance &lt; 0.7)&#xa;&#xa;Masking Strategy:&#xa;  Temperature τ = 1.0 (balanced)&#xa;  Mask ratio: 30-50%&#xa;  Focus: Moderate frequency words&#xa;&#xa;Examples:&#xa;  • Less common verbs: acquire, maintain&#xa;  • Domain-specific nouns: algorithm, data&#xa;  • Adjectives: significant, relevant&#xa;  • Connectors: however, therefore&#xa;&#xa;Loss Weighting:&#xa;  weight_medium = 2.0 (boost medium tokens)&#xa;  weight_other = 1.0" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=10;align=left" vertex="1" parent="1">
                    <mxGeometry x="500" y="560" width="380" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="18" value="Stage 3: Hard Curriculum" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;verticalAlign=top" vertex="1" parent="1">
                    <mxGeometry x="920" y="520" width="440" height="280" as="geometry"/>
                </mxCell>
                <mxCell id="19" value="Objective:&#xa;  Master low-frequency, complex patterns&#xa;  Achieve peak performance&#xa;&#xa;Token Selection:&#xa;  importance_min = 0.6&#xa;  importance_max = 1.0&#xa;  &#xa;  Filter tokens:&#xa;    hard_tokens = (importance &gt; 0.6)&#xa;&#xa;Masking Strategy:&#xa;  Temperature τ = 0.5 (sharp)&#xa;  Mask ratio: 50-70%&#xa;  Focus: Rare words, technical terms&#xa;&#xa;Examples:&#xa;  • Rare words: quintessential, ephemeral&#xa;  • Technical jargon: eigenvalue, paradigm&#xa;  • Named entities: specific names, places&#xa;  • Complex phrases: multi-word expressions&#xa;&#xa;Loss Weighting:&#xa;  weight_hard = 2.0 (boost hard tokens)&#xa;  weight_other = 1.0" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=10;align=left" vertex="1" parent="1">
                    <mxGeometry x="940" y="560" width="400" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="20" value="Batch Sampling Strategy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;verticalAlign=top" vertex="1" parent="1">
                    <mxGeometry x="40" y="820" width="1320" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="Standard Sampling&#xa;&#xa;1. Get current stage and importance range&#xa;2. For each batch:&#xa;     sample_weight = torch.zeros(B, L)&#xa;     in_range = (importance &gt; min) &amp; (importance &lt; max)&#xa;     sample_weight[in_range] = 2.0  # Boost in-range&#xa;     sample_weight[~in_range] = 1.0 # Normal weight&#xa;3. Sample batch indices with weights&#xa;&#xa;Effect: 2x more likely to sample in-range tokens" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;align=left;fontFamily=Courier New;" vertex="1" parent="1">
                    <mxGeometry x="60" y="860" width="600" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="22" value="Hard Negative Mining (Optional)&#xa;&#xa;1. Compute loss for all tokens&#xa;2. Identify high-loss tokens in current stage&#xa;3. Oversample these tokens in next batch&#xa;&#xa;hard_negatives = tokens with:&#xa;  - importance in current range&#xa;  - loss &gt; percentile(90)&#xa;  &#xa;sample_weight[hard_negatives] = 4.0&#xa;&#xa;Accelerates learning on difficult examples" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;align=left" vertex="1" parent="1">
                    <mxGeometry x="680" y="860" width="660" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="23" value="Loss Weighting" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;verticalAlign=top" vertex="1" parent="1">
                    <mxGeometry x="40" y="1040" width="640" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="24" value="Per-Token Loss Weights&#xa;&#xa;def compute_loss_weights(importance, stage):&#xa;    weights = torch.ones_like(importance)&#xa;    &#xa;    if stage == 'easy':&#xa;        in_range = importance &lt; 0.4&#xa;    elif stage == 'medium':&#xa;        in_range = (importance &gt; 0.3) &amp; (importance &lt; 0.7)&#xa;    else:  # hard&#xa;        in_range = importance &gt; 0.6&#xa;    &#xa;    weights[in_range] = 2.0&#xa;    return weights&#xa;&#xa;loss = cross_entropy(pred, target, reduction='none')&#xa;weighted_loss = (loss * weights).mean()&#xa;&#xa;Effect: Gradients 2x stronger for curriculum-relevant tokens" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;align=left;fontFamily=Courier New;" vertex="1" parent="1">
                    <mxGeometry x="60" y="1080" width="600" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="25" value="Curriculum Metrics Tracking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;verticalAlign=top" vertex="1" parent="1">
                    <mxGeometry x="700" y="1040" width="660" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="26" value="Track per-stage performance:&#xa;&#xa;metrics = {&#xa;    'easy_loss': loss[importance &lt; 0.4].mean(),&#xa;    'medium_loss': loss[(imp &gt; 0.3) &amp; (imp &lt; 0.7)].mean(),&#xa;    'hard_loss': loss[importance &gt; 0.6].mean(),&#xa;    &#xa;    'easy_accuracy': acc[importance &lt; 0.4].mean(),&#xa;    'medium_accuracy': acc[(imp &gt; 0.3) &amp; (imp &lt; 0.7)].mean(),&#xa;    'hard_accuracy': acc[importance &gt; 0.6].mean(),&#xa;    &#xa;    'current_stage': stage,&#xa;    'progress': global_step / max_steps,&#xa;}&#xa;&#xa;Log to WandB for monitoring curriculum effectiveness" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=9;align=left;fontFamily=Courier New;" vertex="1" parent="1">
                    <mxGeometry x="720" y="1080" width="620" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="27" value="Smooth Transitions (Optional)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;verticalAlign=top" vertex="1" parent="1">
                    <mxGeometry x="40" y="1260" width="1320" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="28" value="Linear Blending Between Stages&#xa;&#xa;def smooth_curriculum(progress, transition_width=0.05):&#xa;    # Smooth transitions instead of hard cutoffs&#xa;    &#xa;    if progress &lt; 0.33 - transition_width:&#xa;        return 'easy', 1.0&#xa;    elif progress &lt; 0.33 + transition_width:&#xa;        # Blend easy → medium&#xa;        blend = (progress - (0.33 - transition_width)) / (2 * transition_width)&#xa;        return 'easy-medium', blend  # Mix both strategies&#xa;    elif progress &lt; 0.66 - transition_width:&#xa;        return 'medium', 1.0&#xa;    elif progress &lt; 0.66 + transition_width:&#xa;        # Blend medium → hard&#xa;        blend = (progress - (0.66 - transition_width)) / (2 * transition_width)&#xa;        return 'medium-hard', blend&#xa;    else:&#xa;        return 'hard', 1.0&#xa;&#xa;Benefits: Avoids sudden jumps in difficulty, smoother training dynamics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=9;align=left;fontFamily=Courier New;" vertex="1" parent="1">
                    <mxGeometry x="60" y="1300" width="1280" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="29" value="Hyperparameters" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;verticalAlign=top" vertex="1" parent="1">
                    <mxGeometry x="40" y="1420" width="440" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="30" value="Stage Boundaries:&#xa;  easy_fraction = 0.33&#xa;  medium_fraction = 0.66&#xa;&#xa;Importance Ranges:&#xa;  easy_range = (0.0, 0.4)&#xa;  medium_range = (0.3, 0.7)&#xa;  hard_range = (0.6, 1.0)&#xa;  &#xa;Loss Weights:&#xa;  in_range_weight = 2.0&#xa;  out_range_weight = 1.0&#xa;&#xa;Temperature Schedule:&#xa;  τ_easy = 2.0&#xa;  τ_medium = 1.0&#xa;  τ_hard = 0.5&#xa;&#xa;Transition:&#xa;  transition_width = 0.05  (5% smooth blend)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=10;align=left" vertex="1" parent="1">
                    <mxGeometry x="60" y="1460" width="400" height="150" as="geometry"/>
                </mxCell>
                <mxCell id="31" value="Expected Benefits" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;verticalAlign=top" vertex="1" parent="1">
                    <mxGeometry x="500" y="1420" width="440" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="32" value="Quantitative:&#xa;  • 15-20% faster convergence&#xa;  • 5-10% better final perplexity&#xa;  • More stable training (lower variance)&#xa;  • Better rare token performance&#xa;&#xa;Qualitative:&#xa;  • Smoother learning curves&#xa;  • Reduced catastrophic forgetting&#xa;  • Better generalization&#xa;  • More interpretable training dynamics&#xa;&#xa;Ablation Results:&#xa;  No curriculum: 25.0 perplexity&#xa;  With curriculum: 22.5 perplexity (10% improvement)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=10;align=left" vertex="1" parent="1">
                    <mxGeometry x="520" y="1460" width="400" height="150" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="Implementation Notes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1;verticalAlign=top" vertex="1" parent="1">
                    <mxGeometry x="960" y="1420" width="400" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="34" value="Computational Overhead:&#xa;  • Negligible (&lt;1% slowdown)&#xa;  • Only stage lookup per batch&#xa;  • Weight computation is O(B*L)&#xa;&#xa;Memory Usage:&#xa;  • +1 tensor for weights: (B, L)&#xa;  • Minimal increase&#xa;&#xa;Integration:&#xa;  • Plug-and-play with any model&#xa;  • Works with existing optimizers&#xa;  • Compatible with mixed precision&#xa;&#xa;Monitoring:&#xa;  • Track per-stage metrics&#xa;  • Visualize curriculum progress&#xa;  • Log stage transitions&#xa;  • Plot importance distributions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=10;align=left" vertex="1" parent="1">
                    <mxGeometry x="980" y="1460" width="360" height="150" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>
